# История изменений проекта

## 6.0.1 (27.06.2023)

Исправлена уязвимость, содержащаяся в зависимостях пакета commander.
Commander обновлен до мажорной версии, но для конечного пользователя этого пакета ничего не изменилось.


## 6.0.0 (29.05.2023)

Node.js 12 больше не поддерживается.

См. [гайд по миграции](./MIGRATION.ru.md).


## 5.0.1 (28.04.2023)

Исправили проблемы с резолвом конфликтов переопределения в схемах.


## 5.0.0 (28.02.2023)

Заменили лицензию MIT на Apache-2.0.

## 4.1.2 (22.02.2023)

Добавлен GitHub-пайплайн для сборки и пуша Docker-образа.

## 4.1.1 (09.01.2023)

Заменили динамическое подключение файлов парсеров на статическое.


## 4.1.0 (05.09.2022)

Добавили дополнительную информацию об ошибках импорта (если таковые есть) к аннотациям.


## 4.0.1 (30.08.2022)

Исправили парсинг `Members` в enum. Теперь Crafter выбрасывает предупреждение, если в элементах enum используются невалидные типы.


## 4.0.0 (21.03.2022)

Опубликовали пакет на Гитхабе и добавили файл с лицензией.


## 3.6.0 (28.12.2021)

* Замена форка `@funbox/commonmark` на оригинальный пакет.

## 3.5.0 (11.12.2021)

* Добавление Юриста.

## 3.4.2 (03.11.2021)

* Исправление ошибки ONE_OF_MULTIPLE для nullable элемента с типом oneOf.

## 3.4.1 (03.11.2021)

* Исправление подсчета файлов документации.

## 3.4.0 (20.10.2021)

* Замена базового Докер-образа на node:14.18.0-stretch-slim.

## 3.3.0 (20.08.2021)

* Настройка уведомлений о релизах.

## 3.2.0 (22.07.2021)

* Перевод публикации docker-образа с dind на kaniko.

## 3.1.1 (16.07.2021)

* Исправление парсинга параметров URI, содержащих символы "~", ".", "-".

## 3.1.0 (24.06.2021)

* Добавление ограничения на тип атрибута для определения multi-samples.

## 3.0.0 (23.06.2021)

* Изменение схемы работы с импортами.

## 2.25.0 (18.05.2021)

* Настройка создания релизов при мерже в мастер.

## 2.24.0 (17.05.2021)

* Генерация шаблонов body, включающих все опции One Of.

## 2.23.0 (28.04.2021)

* Добавление sourceMap в ошибки.

## 2.22.0 (23.04.2021)

* Использование concatSourceMaps для объединения sm вместо mergeSourceMaps.

## 2.21.0 (21.04.2021)

* Доработка определения наличия нераспознанной ноды.

## 2.20.0 (20.04.2021)

* Генерация httpTransaction даже если у Action нет ни одного Response.

## 2.19.0 (16.04.2021)

* Добавление дублирующихся секций Default в unrecognizedBlocks.

## 2.18.0 (14.04.2021)

* Добавление sourceMap для httpTransaction в ActionElement.

## 2.17.1 (02.04.2021)

* Исправление обращения к sourceLines при извлечении описания.

## 2.17.0 (02.04.2021)

* Доработка конфигурации gitlab-ci.

## 2.16.6 (29.03.2021)

* Замена ссылок репозиториев на gitlab.

## 2.16.5 (29.03.2021)

* Удаление переменной `no_proxy`.

## 2.16.4 (25.03.2021)

* Исправление перезатирания значений attributes для enum nullable.

## 2.16.3 (23.03.2021)

* Автопубликация пакета.

## 2.16.2 (23.03.2021)

* Настройка кэша node_modules.

## 2.16.1 (22.03.2021)

* Отключение tags pipeline.

## 2.16.0 (19.03.2021)

* Исправление парсинга невалидных секций Resource Group, Resource и Action в language server mode.

## 2.15.1 (16.03.2021)

* Фикс парсинга именованного enum, который содержит только Default-секцию.

## 2.15.0 (15.03.2021)

* Доработки и обновления тестов по результатам отчёта jest.

## 2.14.0 (15.03.2021)

* Исправление лишних отступов во вложенных описаниях.

## 2.13.8 (09.03.2021)

* Исправление примера использования в README.

## 2.13.7 (04.03.2021)

* Исправление обработки unrecognized block после инструкции Import.

## 2.13.6 (04.03.2021)

* Исправление работы с несколькими секциями Default.

## 2.13.5 (02.03.2021)

* Удаление дублирования типов из getDefaultValue.

## 2.13.4 (02.03.2021)

* Исправление обработки пустого заголовка в Resource Prototypes.

## 2.13.3 (02.03.2021)

* Исправление парсинга секции Attributes в language server mode.

## 2.13.2 (02.03.2021)

* Исправление подсчета описания для некорректной сигнатуры в language server mode.

## 2.13.1 (02.03.2021)

* Исправление Source Map для Description внутри ValueMemberElement из MSONNamedTypeElement.

## 2.13.0 (01.03.2021)

* Удаление тестов из Drafter.

## 2.12.0 (26.02.2021)

* Использование отдельного класса для byteBlock / charBlock.

## 2.11.0 (26.02.2021)

* Упрощение хелпера nodeText.

## 2.10.0 (25.02.2021)

* Добавление описания для элементов One Of.

## 2.9.0 (24.02.2021)

* Разделение utils.js на отдельные модули.

## 2.8.0 (15.02.2021)

* Добавление unrecognizedBlocks в AST.

## 2.7.0 (15.02.2021)

* Аудит зависимостей.

## 2.6.0 (29.01.2021)

* Добавление проверки допустимых атрибутов у элемента.

## 2.5.0 (27.01.2021)

* Унификация поля с названием для resource prototype.

## 2.4.0 (26.01.2021)

* Добавление source map для resource prototypes.

## 2.3.3 (21.01.2021)

* Исправление формирования схемы для enum, заданного по ссылке.

## 2.3.2 (15.01.2021)

* Обработка пустой ноды в именованном типе.

## 2.3.1 (15.01.2021)

* Обработка отсутствующего Mixin в Attributes в language server mode.

## 2.3.0 (13.01.2021)

* Добавление толерантного парсинга.

## 2.2.0 (13.01.2021)

* Добавление source map для nested types.

## 2.1.1 (22.12.2020)

* Исправление сочетания ref и nullable в json-схемах.

## 2.1.0 (10.12.2020)

* Исправление добавления атрибутов fixed, fixedType в атрибуты наследующего элемента.

## 2.0.1 (25.11.2020)

* Исправление формирования текста ошибки для параметров.

## 2.0.0 (23.11.2020)

* Добавление возможности переопределения функции чтения импортируемого файла.

## 1.68.1 (23.11.2020)

* Исправление определения дублирующих запросов.

## 1.68.0 (23.11.2020)

* Доработка сообщений ошибок импорта.

## 1.67.1 (18.11.2020)

* Исправление генерации charBlocks для документации из нескольких файлов.

## 1.67.0 (06.11.2020)

* Добавление проверки на дублирование actions.

## 1.66.3 (06.11.2020)

* Исправление опечаток в доке.

## 1.66.2 (23.10.2020)

* Исправление fixed-объектов в массивах.

## 1.66.1 (23.10.2020)

* Переход к следующей ноде в случае неизвестных элементов, вложенных в примитив.

## 1.66.0 (23.10.2020)

* Улучшение SourceMap.

## 1.65.0 (19.10.2020)

* Обработка секции Default в именованных типах.

## 1.64.1 (16.10.2020)

* Исправление обработки nameless endpoint resources.

## 1.64.0 (12.10.2020)

* Удаление передачи дефолтного логгера в Crafter.parse.

## 1.63.1 (15.09.2020)

* Доработка получения nestedTypes именованных типов при наследовании.

## 1.63.0 (21.07.2020)

* Доработка сообщения ошибки "Type not found".

## 1.62.0 (17.07.2020)

* Доработка проверки типа секции MemberTypeGroup в именованных типах.

## 1.61.0 (15.07.2020)

* Удаление присваивания результатов проверки валидности атрибутов.

## 1.60.0 (09.07.2020)

* Улучшение описания файлов в папке `crafter/parsers/elements`.

## 1.59.0 (09.07.2020)

* Улучшение документации в папке `crafter/docs`.

## 1.58.1 (09.07.2020)

* Исправление генерации source maps для файла без новой строки в конце.

## 1.58.0 (08.07.2020)

* Улучшение текста `README.md`.

## 1.57.0 (08.07.2020)

* Доработка переопределения атрибутов при наследовании.

## 1.56.0 (08.07.2020)

* Добавление проверки типа вложенных миксинов.

## 1.55.0 (08.07.2020)

* Возможность задать Include в массивах и перечислениях.

## 1.54.4 (07.07.2020)

* Предотвращение повторного вызова callback в Crafter.parse.

## 1.54.3 (22.06.2020)

* Исправление обработки импортов в импортированном файле.

## 1.54.2 (22.06.2020)

* Исправление парсинга секции Resource идущей после Resource Prototypes.

## 1.54.1 (22.06.2020)

* Корректная обработка ошибок неизвестного Resource Prototype.

## 1.54.0 (22.06.2020)

* Распознание первой ноды подключаемого файла при импорте.

## 1.53.0 (17.06.2020)

* Переход на Node.js 12.16.3 в Docker образе.

## 1.52.0 (19.05.2020)

* Правка jsdoc для конструкторов RequestElement и ResponseElement.

## 1.51.0 (19.05.2020)

* Запрет указания сложных типов данных для URI параметров.

## 1.50.0 (14.05.2020)

* Добавление поддержки рекурсивных объектов.

## 1.49.0 (13.05.2020)

* Вывод предупреждений при дублировании ресурсов.

## 1.48.1 (14.04.2020)

* Удаление definitions для наследуемых типов.

## 1.48.0 (09.04.2020)

* Вывод предупреждений при задании примеров массивам и перечислениям с объектами.

## 1.47.2 (20.03.2020)

* Сохранение отступов списков в описании.

## 1.47.1 (26.02.2020)

* Доработка генерации json schema для рекурсивных массивов с вложенным полем.

## 1.47.0 (14.02.2020)

* Удаление избыточной проверки.

## 1.46.1 (12.02.2020)

* Рефакторинг названия и описания переменных и параметров функции.

## 1.46.0 (31.01.2020)

* Добавление информации об отладке Crafter.

## 1.45.0 (31.01.2020)

* Описание структур данных из parsers/elements.

## 1.44.0 (28.01.2020)

* Добавление комментариев с обоснованием использования StringElement для описания.

## 1.43.0 (28.01.2020)

* Добавление дебаг-режима.

## 1.42.0 (28.01.2020)

* Постпроцессинг созданного ValueMemberElement в schema.test.js.

## 1.41.0 (27.01.2020)

* Добавление класса SourceMap.

## 1.40.0 (27.01.2020)

* Добавление SourceMapElementWithLineColumnInfo.

## 1.39.1 (24.01.2020)

* Исправление типа элемента statusCode в ResponseElement.

## 1.39.0 (24.01.2020)

* Удаление ненужных проверок типов в splitValues и convertType.

## 1.38.0 (21.01.2020)

* Описание процесса преобразования Markdown дерева в APIB AST.

## 1.37.0 (02.11.2019)

* Использование по умолчанию значения property в качестве примера.

## 1.36.1 (29.10.2019)

* Исправление ошибки "Type not found" при парсинге атрибутов "default" и "sample".

## 1.36.0 (19.10.2019)

* Поддержка рекурсивных массивов.

## 1.35.1 (17.10.2019)

* Добавление pretest-скрипта.

## 1.35.0 (14.10.2019)

* Удаление мутации объекта valueMemberElement в методе getSchema.

## 1.34.2 (07.10.2019)

* Отключение парсинга атрибутов у schema named type.

## 1.34.1 (03.10.2019)

* Исправление генерации body для falsy примеров.

## 1.34.0 (03.10.2019)

* Сборка docker-образа на этапе postpublish.

## 1.33.0 (02.10.2019)

* Исключение тестов при публикации пакета.

## 1.32.0 (02.10.2019)

* Source maps для инлайн-примеров.

## 1.31.4 (02.10.2019)

* Удаление ручной корректировки sourcepos для code-block типа.

## 1.31.3 (01.10.2019)

* Указание версии crafter при добавлении его в контейнер.

## 1.31.2 (01.10.2019)

* Установка последней версии пакета Crafter в контейнер.

## 1.31.1 (01.10.2019)

* Добавление отдельной команды на пуш latest-версии образа с Crafter.

## 1.31.0 (01.10.2019)

* Добавление Dockerfile для сборки образа.

## 1.30.0 (30.09.2019)

* Добавление ошибки SignatureError и ее обработка при парсинге.

## 1.29.0 (26.09.2019)

* Перевод на @funbox/commonmark для корректного отражения sourcepos комментариев.

## 1.28.0 (23.09.2019)

* Удаление избыточного копирования контента при наследовании типа от типа.

## 1.27.0 (18.09.2019)

* Парсинг заголовков «Sample».

## 1.26.0 (02.09.2019)

* Возможность использования Schema-типов в различных секциях.

## 1.25.0 (30.08.2019)

* Возможность получить список файлов использованных при генерации документации.

## 1.24.4 (28.08.2019)

* Исправление ошибок вида «invalid sectionType».

## 1.24.3 (22.08.2019)

* Исправление парсинга блоков с заголовками при импорте.

## 1.24.2 (22.08.2019)

* Исправление формирования информации о строке/колонке в sourceMap при импорте.

## 1.24.1 (20.08.2019)

* Исправление ошибок «Maximum call stack size exceeded».

## 1.24.0 (15.08.2019)

* Доработка слияния полей items в хэлпере mergeSchemas.

## 1.23.1 (15.08.2019)

* Исправление сообщения об ошибке при отсутствии искомого блока.

## 1.23.0 (02.08.2019)

* Исправление рефракта элементов для соответствия api-elements.

## 1.22.0 (31.07.2019)

* Вывод предупреждения о несовпадении значения и ожидаемого типа.

## 1.21.4 (31.07.2019)

* Отображение предупреждения при попытке задать inline-значение объекту.

## 1.21.3 (30.07.2019)

* Исправление определения типа инлайн-элементов массива.

## 1.21.2 (29.07.2019)

* Исправление обработки описания параметров URI.

## 1.21.1 (29.07.2019)

* Исправление применения Sample и Default, добавленных в именованном типе.

## 1.21.0 (26.07.2019)

* Рефакторинг getBody.

## 1.20.0 (25.07.2019)

* Рефакторинг работы со значениями по-умолчанию.

## 1.19.0 (25.07.2019)

* Рефакторинг примеров (Samples).

## 1.18.3 (10.07.2019)

* Исправление ошибки при неправильном атрибуте.

## 1.18.2 (26.06.2019)

* Исправление значения value со строки на null в schema для типа nullable enum.

## 1.18.1 (26.06.2019)

* Корректировка schema для типа nullable enum.

## 1.18.0 (19.06.2019)

* Парсинг Schema Structures.

## 1.17.0 (18.06.2019)

* Вывод версии крафтера.

## 1.16.0 (14.06.2019)

* Генерация json-schema для секций Message.

## 1.15.0 (10.06.2019)

* Добавление блоков Schema Structures.

## 1.14.5 (07.06.2019)

* Генерация корректного body для примитивных типов без примеров.

## 1.14.4 (03.06.2019)

* Исправление парсинга пустых секций Body и Schema.

## 1.14.3 (03.06.2019)

* Корректировка отражения value в schema при наследовании именованных типов.

## 1.14.2 (03.06.2019)

* Исправление schema для комплексных объектов с nullable.

## 1.14.1 (31.05.2019)

* Исправление рефракта заголовка секции Message.

## 1.14.0 (25.05.2019)

* Парсинг секции Message.

## 1.13.1 (24.05.2019)

* Исправление потери отступов у code_block.

## 1.13.0 (24.05.2019)

* Добавление в readme.md описания использования на других проектах.

## 1.12.1 (22.05.2019)

* Вывод предупреждений о неверном задании отступов секций Headers и Body.

## 1.12.0 (21.05.2019)

* Поддержка параметров minimum и maximum.

## 1.11.1 (20.05.2019)

* Исправление парсинга параметров URI со звёздочкой в actions.

## 1.11.0 (17.05.2019)

* Парсинг секций SubGroup.

## 1.10.2 (16.05.2019)

* Изменение схемы парсинга сигнатуры секций Resource.

## 1.10.1 (14.05.2019)

* Исправление получения сорсмапов для блочного описания без отступов.

## 1.10.0 (13.05.2019)

* Вывод ошибок в AST.

## 1.9.4 (07.05.2019)

* Исправление парсинга блока кода в блочном описании.

## 1.9.3 (07.05.2019)

* Корректировка json-схем для fixed и fixed-type элементов.

## 1.9.2 (07.05.2019)

* Конвертация значений нетипизированных элементов массива.

## 1.9.1 (26.04.2019)

* Конвертирование вложенных элементов enum.

## 1.9.0 (23.04.2019)

* Возможность отображения блоков в описании.

## 1.8.4 (23.04.2019)

* Исправление передачи атрибута fixed-type вложенным элементам.

## 1.8.3 (19.04.2019)

* Исправление проверки типа атрибутов при сравнении.

## 1.8.2 (19.04.2019)

* Исправление проверки совпадающих атрибутов при резолве наследования.

## 1.8.1 (18.04.2019)

* Исправление обработки секций resourcePrototype.

## 1.8.0 (18.04.2019)

* Добавление предупреждения, если тип значения не соответствует string-типу для атрибутов pattern и format.

## 1.7.0 (16.04.2019)

* Добавление warning-ов в AST.

## 1.6.0 (07.04.2019)

* Удаление ключевого слова fixed-type для массивов из дерева.

## 1.5.0 (05.04.2019)

* Поддержка атрибута format.

## 1.4.0 (03.04.2019)

* Обработка атрибутов min-length и max-length.

## 1.3.0 (30.03.2019)

* Добавление описаний для fixtures.

## 1.2.0 (19.03.2019)

* Добавление поддержки атрибута pattern для строковых типов.

## 1.1.14 (18.03.2019)

* Проверка атрибута optional при формировании json-schema.

## 1.1.13 (13.03.2019)

* Использование дефолтных значений в body и json-schema.

## 1.1.12 (07.03.2019)

* Исправление генерации json-schema для fixed и fixed-type объектов.

## 1.1.11 (07.03.2019)

* Доработки секции Default и возможность вкладывать Default и Sample в примитивы.

## 1.1.10 (07.03.2019)

* Исправление парсинга атрибутов.

## 1.1.9 (07.03.2019)

* Добавление предупреждения если в action отсутствуют ответы.

## 1.1.8 (06.03.2019)

* Исправление процессинга именованных примитивных типов.

## 1.1.7 (01.03.2019)

* Исправление парсинга именованных эндпоинтов.

## 1.1.6 (27.02.2019)

* Удаление пустой строки из source map.

## 1.1.5 (27.02.2019)

* Обработка enum uri-параметра с пропущенным "+ Members".

## 1.1.4 (27.02.2019)

* Вывод полного идентификатора типа uri-параметра.

## 1.1.3 (27.02.2019)

* Вывод предупреждений на stderr.

## 1.1.2 (26.02.2019)

* Обработка вложенных элементов href-параметра в виде описания.

## 1.1.1 (22.02.2019)

* Исправление парсинга пустых значений enum.
* Исправление парсинга Resource Prototype.

## 1.1.0 (21.02.2019)

* Вывод более читаемой ошибки при парсинге секций NamedType и Attributes.

## 1.0.4 (20.02.2019)

* Доработка конвертации значений в mson-атрибутах.

## 1.0.3 (16.02.2019)

* Исправление генерации body.

## 1.0.2 (11.02.2019)

* Исправление наследования от пустого именованного типа.

## 1.0.1 (06.02.2019)

* Исправление метода Crafter.parse при использовании вместе с utils.promisify.

## 1.0.0 (30.01.2019)

* Обработка атрибута sample у разных типов mson-элементов.

## 0.13.0 (29.01.2019)

* Добавление препроцессинга типов.

## 0.12.1 (24.01.2019)

* Исправление получения sourceMaps элементов из импортированных файлов.

## 0.12.0 (23.01.2019)

* Указание номера строки и текущего файла при выводе предупреждения.

## 0.11.0 (22.01.2019)

* Генерация messageBody.

## 0.10.3 (18.01.2019)

* Удаление дубликата слова Warning в предупреждении.

## 0.10.2 (18.01.2019)

* Исправление обработки атрибута "fixed" при создании схем.

## 0.10.1 (10.01.2019)

* Исправление обработки описания для response и request.

## 0.10.0 (09.01.2019)

* Запись инлайн-значений массива в качестве блока samples.

## 0.9.2 (27.12.2018)

* Исправление парсинга секции Action без uri.

## 0.9.1 (27.12.2018)

* Добавление условия выхода при получении описания apib-документа.

## 0.9.0 (27.12.2018)

* Обработка секции с метаданными.

## 0.8.2 (26.12.2018)

* Исправление обработки пустых именованных типов.

## 0.8.1 (26.12.2018)

* Исправление возврата nextNode из секции Attributes.

## 0.8.0 (25.12.2018)

* Реализация блочного описания массивов.

## 0.7.0 (19.12.2018)

* Добавление тестов из Drafter.

## 0.6.1 (14.12.2018)

* Исправление работы при разборе документации без названия.

## 0.6.0 (07.12.2018)

* Изменение очередности атрибутов в именованных типах для соответствия поведению Drafter.

## 0.5.1 (06.12.2018)

* Исправление определения currentFile.

## 0.5.0 (06.12.2018)

* Добавление обработки описания и свойств для MSONNamedTypeElement.

## 0.4.0 (05.12.2018)

* Добавление warning'ов в SignatureParser.
* Добавление дополнительных тестов для SignatureParser.

## 0.3.0 (03.12.2018)

* Обработка секции Schema.

## 0.2.0 (03.12.2018)

* Добавление Unit-тестов на DataStructureProcessor.

## 0.1.2 (03.12.2018)

* Исправление резолвинга путей при работе с импортами.

## 0.1.1 (27.11.2018)

* Исправление поля bin в package.json.

## 0.1.0 (17.11.2018)

Начальный прототип проекта. Проект строит AST так же, как это делает Drafter в ветке master (v4.0.0-pre.2). Реализованы следующие функции:

* парсинг структур данных;
* парсинг запросов, ответов;
* парсинг `Resource Prototypes`;
* генерация JSON Schema;
* генерация Source Maps;
* подключение других файлов через `Import`.

В рамках начального прототипа не реализованы такие функции, как старый синтаксис параметров запроса (`+ id (number, optional, 1000) description`) и [Model](https://github.com/apiaryio/api-blueprint/blob/master/API%20Blueprint%20Specification.md#def-model-section).
